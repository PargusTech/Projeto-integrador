<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redefinir Senha</title>
    <link rel = "stylesheet" type = "text/css" href = "RedefinePassword.css">

    <script src="https://kit.fontawesome.com/cf6fa412bd.js" crossorigin="anonymous"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            var passwordInput = document.getElementById('password');
            var confirmPasswordInput = document.getElementById('confirm-password');
            var submitButton = document.getElementById('submit-btn');
            var successPopup = document.getElementById('success-popup');
            var errorMessage = document.getElementById('error-message');

            passwordInput.addEventListener('input', validatePasswords);
            confirmPasswordInput.addEventListener('input', validatePasswords);

            function validatePasswords() {
                if (passwordInput.value === confirmPasswordInput.value) {
                    submitButton.classList.remove('disabled');
                    errorMessage.textContent = '';
                } else {
                    submitButton.classList.add('disabled');
                    errorMessage.textContent = 'As senhas não coincidem';
                }
            }

            submitButton.addEventListener('click', function (event) {
                event.preventDefault(); // Impede a atualização da página

                if (submitButton.classList.contains('disabled')) {
                    return; // Retorna sem fazer nada se o botão estiver desativado
                }

                successPopup.style.display = 'block';

                // Remover o popup após 3 segundos
                
            });

            submitButton.addEventListener('click', function (event) {
                event.preventDefault(); // Impede a atualização da página
              
                if (submitButton.classList.contains('disabled')) {
                  return; // Retorna sem fazer nada se o botão estiver desativado
                }
              
                successPopup.style.display = 'block';
              
                // Redireciona para a página "DashBoart.html" após 3 segundos (3000 milissegundos)
                setTimeout(function() {
                  window.location.href = "/Dashboard/index.html";
                }, 3000);
              });
              
        });
    </script>

</head>
<body>
    <header class = "VoltarLogin">
        <a href = "/LoginPage/Login.html" id = "Btn-login">Home</a>
    </header>
        <div class="BlocoBranco-form">
            <div class="reset-header">
                <img alt = "Logo" src = "pargus_tech.jpg" id = "logo">
                <h1>Redefinição de Senha</h1>
                <p>Preencha os campos abaixo</p>
                
                    <form>
                    
                        <div class="reset-group">
                            <label for="password"></label>
                             <i class="fas fa-lock iPassword"></i>
                            <input type="password" id="password" placeholder= "Nova Senha" required>
                           
                            <br>
                            <label for="confirm-password"></label>
                                <i class="fas fa-lock iPassword"></i>
                            <input type="password" id="confirm-password" placeholder= "Confirmar Nova Senha" required>   
                        </div>
                        
                        <div class="error-message"><span id="error-message" ></span></div>

                        <div id="success-popup" class="success-popup">Senha redefinida com sucesso!</div>
                            
                        <div>
                            <button id="submit-btn" href="#success-popup">Redefinir Senha</button>
                        </div>
                    </form>        
            </div>
        </div>  
        
</body>
</html>